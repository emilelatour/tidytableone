% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_tidytableone.R
\name{.create_tidytableone_core}
\alias{.create_tidytableone_core}
\title{Tidy table one}
\usage{
.create_tidytableone_core(
  data,
  strata = NULL,
  vars,
  na_level = "(Missing)",
  b_replicates = 2000,
  checkbox = NULL,
  checkbox_opts = list(denom = "group", pvals = "per_level", test = "auto", p_adjust =
    "none", show_any = TRUE, note =
    "Participants could select more than one option; percentages may exceed 100\%."),
  ...
)
}
\arguments{
\item{data}{A data frame or tibble containing the variables to be summarized.}

\item{strata}{Character vector of the stratifying (grouping) variable.}

\item{vars}{Character vector of the variable names to be summarized. If
empty, then all variables in the given data frame are used.}

\item{na_level}{Character string of the text to replace \code{NA} in the strata
variable, if any exist.}

\item{b_replicates}{an integer specifying the number of replicates used in
the Monte Carlo test for Fisher's Exact test and Chi-square test.}

\item{checkbox}{A tibble/data.frame specifying checkbox blocks:
columns \code{var} (the checkbox column name), \code{overall_lbl} (group label to show),
\code{checkbox_lbl} (label for each option), and \code{checkbox_txt} (the selected text to match, e.g., "Checked").}

\item{checkbox_opts}{A list of options for checkbox processing. Recognized fields:
\code{denom} = c("group","nonmissing","responders"), \code{pvals} (ignored for no-strata),
\code{test} (ignored for no-strata), \code{p_adjust} (method passed to stats::p.adjust),
\code{show_any} (logical; add “Any selected” row), \code{note} (character footnote).}

\item{...}{Additional arguments. Not used.}
}
\value{
A tibble with the following results
\describe{
\item{strata}{Level of the stratifying variable}
\item{var}{Variable/column name}
\item{n}{Number of records}
\item{n_distinct}{Numer of distinct values}
\item{complete}{Number of non-missing observations}
\item{missing}{Number of missing observations}
\item{mean}{Mean}
\item{sd}{Standard deviation}
\item{p0}{Minimum}
\item{p25}{25th percentile}
\item{p50}{Median}
\item{p75}{75th percentile}
\item{p100}{Maximum}
\item{cv}{Coefficient of variation}
\item{shapiro_test}{Shapiro-Wilkes test: p-value}
\item{ks_test}{Kolmogorov-Smirnov test: p-value}
\item{ad_test}{Anderson-Darling test for normality: p-value}
\item{level}{Level of the variable}
\item{n_level}{Total number in the variable's group}
\item{n_strata}{Total number in the variable group and strata}
\item{chisq_test}{Chi square test: p-value, with continuity correction}
\item{chisq_test_no_correction}{Chi square test: p-value, without continuity correction}
\item{chisq_test_simulated}{Chi square test: p-value: simulated p-value}
\item{fisher_test}{Fisher's exact test: p-value}
\item{fisher_test_simulated}{Fisher's exact test: simulated p-value}
\item{check_categorical_test}{Is Chi square OK? Consider Fisher}
\item{oneway_test_unequal_var}{Oneway anova test: p-value, equivalent to t-test when only 2 groups, unequal variances}
\item{oneway_test_equal_var}{Oneway anova test: p-value, equivalent to t-test when only 2 groups, equal variances}
\item{kruskal_test}{Kruskal-Wallis Rank Sum Test: p-value, equivalent to Mann-Whitney U test when only 2 groups}
\item{bartlett_test}{Bartlett's test for homogeneity of variances: p-value}
\item{levene_test}{Levene's test for homogeneity of variances: p-value}
\item{smd}{Standarized mean difference for all pairwise comparisons}
}
}
\description{
Creates a tidy data frame of the results that can go into a "Table 1" of
summary descriptive statistics of a study sample. Inspiration for this is owed
to the \code{tableone} package by Kazuki Yoshida.
}
\examples{
# Minimal smoke test (always runs)
set.seed(1)
tiny <- tibble::tibble(
  cut   = sample(c("Fair","Good"), 20, TRUE),
  color = sample(c("E","H"), 20, TRUE),
  carat = runif(20, 0.2, 1.5)
)
create_tidytableone(
  data = tiny,
  strata = "cut",
  vars = c("carat","color")
)

\dontshow{if (interactive()) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
# Larger, fully worked examples (run only in interactive sessions)
library(dplyr)

library(ggplot2)  # for diamonds data

#### With strata --------------------------------
# Continuous + categorical
t1 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = "cut",
  vars = c("carat","color","clarity","depth","table","price")
)
dplyr::glimpse(t1)
# If you have an adorn helper:
# t1 |> adorn_tidytableone()

# Continuous only
t2 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = "cut",
  vars = c("carat")
)
# t2 |> adorn_tidytableone()

# Categorical only
t3 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = "cut",
  vars = c("color")
)
# t3 |> adorn_tidytableone()

#### Without strata --------------------------------
# Continuous + categorical
t4 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = NULL,
  vars = c("carat","color","clarity","depth","table","price")
)
# t4 |> adorn_tidytableone()

# Continuous only
t5 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = NULL,
  vars = c("carat")
)
# t5 |> adorn_tidytableone()

# Categorical only
t6 <- create_tidytableone(
  data = ggplot2::diamonds,
  strata = NULL,
  vars = c("color")
)
# t6 |> adorn_tidytableone()


#### With Built in data set --------------------------------

tab1 <- create_tidytableone(data = pbc_mayo,
                              strata = "trt",
                              vars = c("time",
                                       "status",
                                       "trt",
                                       "age",
                                       "sex",
                                       "ascites",
                                       "hepato",
                                       "spiders",
                                       "edema",
                                       "bili",
                                       "chol",
                                       "albumin",
                                       "copper",
                                       "alk_phos",
                                       "ast",
                                       "trig",
                                       "platelet",
                                       "protime",
                                       "stage"))

dplyr::glimpse(tab1)

\dontshow{\}) # examplesIf}
}
\keyword{internal}
