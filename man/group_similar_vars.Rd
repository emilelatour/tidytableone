% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/group_similar_vars.R
\name{group_similar_vars}
\alias{group_similar_vars}
\title{Auto‑group similar variable names by text similarity}
\usage{
group_similar_vars(
  x,
  method = "jw",
  normalize = TRUE,
  normalize_numbers = TRUE,
  min_multisize = 2,
  h_grid = NULL,
  block_prefix_len = 3,
  absorb_singletons_by_stem = TRUE,
  require_triple_underscores_for_absorb = TRUE,
  relax_factor = 1.2,
  abs_thresh = 0.33
)
}
\arguments{
\item{x}{Character vector of variable names.}

\item{method}{Distance method for \code{stringdist::stringdistmatrix()} (default "jw").}

\item{normalize}{If TRUE, lowercase and collapse separators for robustness.}

\item{normalize_numbers}{If TRUE, replace digit runs with "#".}

\item{min_multisize}{Minimum size for at least one multi‑member cluster (default 2).}

\item{h_grid}{Optional numeric vector of candidate cut heights for the dendrogram.}

\item{block_prefix_len}{Compare only within blocks defined by the first N letters (default 3).}

\item{absorb_singletons_by_stem}{Try absorbing singletons into same‑stem clusters (default TRUE).}

\item{require_triple_underscores_for_absorb}{If TRUE, only absorb singletons whose original
name contains "___" (default TRUE).}

\item{relax_factor}{Allow singleton’s mean distance up to this multiple of the candidate
cluster’s internal cohesion (default 1.2).}

\item{abs_thresh}{Absolute mean‑distance threshold for absorption (default 0.33).}
}
\value{
A tibble with columns: var, group_id, group_label, group_label_first, group_size.
}
\description{
Uses string distances + hierarchical clustering and auto-selects a cut height
by maximizing mean silhouette. Returns a tibble with group ids, sizes, and
readable group labels. Optionally absorbs singleton items into a same‑stem
multi‑member cluster under conservative thresholds.
}
\examples{
vars <- c("gender","age","education","ethnicity","income","marital_status",
          "race___1","race___2","race___3","race___4","race___5","race___6","race___98")
group_similar_vars(vars)

}
